(function(){var a,d,e,b,c,f;b=this;a=function(g,i,h){console.log("SQLitePlugin");this.dbPath=g;this.openSuccess=i;this.openError=h;if(!g){throw new Error("Cannot create a SQLitePlugin instance without a dbPath")}this.openSuccess||(this.openSuccess=function(){return console.log("DB opened: "+g)});this.openError||(this.openError=function(j){return console.log(j.message)});this.open(this.openSuccess,this.openError)};a.prototype.openDBs={};a.prototype.transaction=function(i,g,j){var h;h=new d(this.dbPath);i(h);return h.complete(j,g)};a.prototype.open=function(i,g){var h;console.log("SQLitePlugin.prototype.open");h=void 0;if(!(this.dbPath in this.openDBs)){this.openDBs[this.dbPath]=true;return PhoneGap.exec(i,g,"SQLitePlugin","open",[this.dbPath])}};a.prototype.close=function(i,g){var h;console.log("SQLitePlugin.prototype.close");h=void 0;if(this.dbPath in this.openDBs){delete this.openDBs[this.dbPath];return PhoneGap.exec(null,null,"SQLitePlugin","close",[this.dbPath])}};e=function(){var h,g;h=new Date().getTime();g=new Date().getTime();while(h===g){g=new Date().getTime()}return g+"000"};f=[];c={};d=function(g){this.dbPath=g;this.executes=[];this.trans_id=e();this.__completed=false;this.__submitted=false;this.optimization_no_nested_callbacks=true;console.log("SQLitePluginTransaction - this.trans_id:"+this.trans_id);f[this.trans_id]=[];c[this.trans_id]=new Object()};d.queryCompleteCallback=function(k,j,h){var i,g;console.log("SQLitePluginTransaction.queryCompleteCallback");i=null;for(g in f[k]){if(f[k][g]["query_id"]===j){i=f[k][g];if(f[k].length===1){f[k]=[]}else{f[k].splice(g,1)}break}}if(i&&i.callback){return i.callback(h)}};d.queryErrorCallback=function(k,j,h){var i,g;i=null;for(g in f[k]){if(f[k][g]["query_id"]===j){i=f[k][g];if(f[k].length===1){f[k]=[]}else{f[k].splice(g,1)}break}}if(i&&i.err_callback){return i.err_callback(h)}};d.txCompleteCallback=function(g){if(typeof g!=="undefined"){if(g&&c[g]&&c[g]["success"]){return c[g]["success"]()}}else{return console.log("SQLitePluginTransaction.txCompleteCallback---transId = NULL")}};d.txErrorCallback=function(h,g){if(typeof h!=="undefined"){console.log("SQLitePluginTransaction.txErrorCallback---transId:"+h);if(h&&c[h]["error"]){c[h]["error"](g)}delete f[h];return delete c[h]}else{return console.log("SQLitePluginTransaction.txErrorCallback---transId = NULL")}};d.prototype.add_to_transaction=function(i,h,j,l,k){var g;g=new Object();g.trans_id=i;if(l||!this.optimization_no_nested_callbacks){g.query_id=e()}else{if(this.optimization_no_nested_callbacks){g.query_id=""}}g.query=h;if(j){g.params=j}else{g.params=[]}g.callback=l;g.err_callback=k;if(!f[i]){f[i]=[]}return f[i].push(g)};d.prototype.executeSql=function(m,g,l,j){var i,k,h;console.log("SQLitePluginTransaction.prototype.executeSql");i=void 0;k=void 0;h=void 0;h=this;k=null;if(l){console.log("success not null:"+m);k=function(p){var o,n;console.log("executeSql callback:"+JSON.stringify(p));o=void 0;n=void 0;n=p;o={rows:{item:function(q){return n[q]},length:n.length},rowsAffected:n.rowsAffected,insertId:n.insertId||null};return l(h,o)}}else{console.log("success NULL:"+m)}i=null;if(j){i=function(n){return j(h,n)}}this.add_to_transaction(this.trans_id,m,g,k,i);return console.log("executeSql - add_to_transaction"+m)};d.prototype.complete=function(n,l){var o,k,h,m,g,j,i;console.log("SQLitePluginTransaction.prototype.complete");o=void 0;k=void 0;h=void 0;m=void 0;g=void 0;j=void 0;i=void 0;if(this.__completed){throw new Error("Transaction already run")}if(this.__submitted){throw new Error("Transaction already submitted")}this.__submitted=true;i=this;j=function(){if(f[i.trans_id].length>0&&!i.optimization_no_nested_callbacks){i.__submitted=false;return i.complete(n,l)}else{this.__completed=true;if(n){return n(i)}}};h=function(p){};if(l){h=function(p){return l(i,p)}}c[this.trans_id]["success"]=j;c[this.trans_id]["error"]=h;return PhoneGap.exec(null,null,"SQLitePlugin","executeSqlBatch",f[this.trans_id])};b.SQLitePluginTransaction=d;return b.sqlitePlugin={openDatabase:function(h,k,j,g,i,l){return new a(h,i,l)}}})();